<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Plan Details - Zindigi Musafir</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#1E3A6D', // Deep Blue
                        'primary-light': '#2A4B8D',
                        'primary-pale': '#E8EDF5',
                        accent: '#26d0ce', // Teal Accent
                    }
                }
            }
        }
    </script>
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Custom Styles -->
    <link rel="stylesheet" href="styles.css">
    <style>
        .toggle-checkbox:checked {
            right: 0;
            border-color: #1E3A6D;
        }

        .toggle-checkbox:checked+.toggle-label {
            background-color: #1E3A6D;
        }
    </style>
</head>

<body class="bg-gray-200 font-sans">
    <div class="min-h-screen flex justify-center">
        <!-- Mobile Frame -->
        <div class="w-full max-w-md bg-white min-h-screen shadow-2xl relative overflow-hidden flex flex-col">

            <!-- Main Content Area -->
            <main id="app" class="flex-1 overflow-y-auto no-scrollbar bg-white pb-20">
                <!-- Top Header -->
                <div class="flex px-4 pt-6 justify-between items-center pb-4 bg-white border-b border-gray-100">
                    <div class="flex items-center gap-3">
                        <button id="menu-btn"
                            class="w-10 h-10 rounded-full bg-[#F1F6FA] flex items-center justify-center text-primary">
                            <i data-lucide="menu" width="20"></i>
                        </button>
                        <div class="w-[1px] h-6 bg-gray-200"></div>
                        <h2 class="text-[#1E3A6D] font-bold text-[14px] tracking-tight">Your Umrah Overview</h2>
                    </div>
                    <div class="bg-[#24B2B9] pl-3 pr-4 py-2 rounded-full flex items-center gap-1 shadow-sm">
                        <span class="text-white font-bold text-sm leading-none">120+</span>
                        <span class="text-white text-[10px] font-medium leading-none">Points</span>
                    </div>
                </div>

                <!-- Sub Header (Sticky) -->
                <div class="flex px-4 py-3 justify-between items-center sticky top-0 bg-white backdrop-blur-sm z-20">
                    <div class="flex items-center gap-3">
                        <a href="plans.html"
                            class="w-8 h-8 rounded-full bg-white flex items-center justify-center text-primary shadow-sm hover:bg-gray-100 transition-colors">
                            <i data-lucide="chevron-left" width="18"></i>
                        </a>
                        <h1 class="text-[#1E3A6D] font-bold text-lg">Your Umrah Plans</h1>
                    </div>
                    <a href="journeyForm.html"
                        class="bg-[#1E3A6D] text-white px-4 py-2 rounded-full text-xs font-bold shadow-md hover:bg-[#16315b] transition-colors flex items-center gap-1">
                        <i data-lucide="plus" width="14"></i> New Journey
                    </a>
                </div>

                <!-- Horizontal Tabs -->
                <div class="px-4 mb-4">
                    <div
                        class="flex gap-2 overflow-x-auto no-scrollbar rounded-3xl bg-gradient-to-r from-[#F6F6F6] to-[#F6F6F6] p-2">
                        <a href="plans.html"
                            class="bg-white text-[#627497] px-5 py-2 border border-gray-100 rounded-full text-xs font-bold whitespace-nowrap hover:bg-gray-50 transition-colors">Overview</a>
                        <button
                            class="bg-[#24B2B9] text-white px-5 py-2 rounded-full text-xs font-bold whitespace-nowrap shadow-sm">My
                            Umrah</button>
                        <button
                            class="bg-white text-[#627497] px-5 py-2 border border-gray-100 rounded-full text-xs font-bold whitespace-nowrap hover:bg-gray-50 transition-colors">Parent's</button>
                        <button
                            class="bg-white text-[#627497] px-5 py-2 border border-gray-100 rounded-full text-xs font-bold whitespace-nowrap hover:bg-gray-50 transition-colors">Ali's
                            Plan</button>
                        <button
                            class="bg-white text-[#627497] px-5 py-2 border border-gray-100 rounded-full text-xs font-bold whitespace-nowrap hover:bg-gray-50 transition-colors">Family</button>
                    </div>
                </div>

                <!-- Journey Overview Card -->
                <div class="px-4">
                    <h2 class="text-sm font-bold text-[#1E3A6D] mb-6">Your Journey Overview</h2>

                    <div class="bg-white rounded-2xl p-4 shadow-md border border-gray-100 mb-4">

                        <div class="flex justify-between items-end">
                            <div class="space-y-1">
                                <p class="text-[11px] font-medium text-[#627497] uppercase tracking-wider">Total Saved
                                </p>
                                <div class="flex items-baseline gap-1">
                                    <span class="text-[10px] font-bold text-[#1E3A6D]">PKR</span>
                                    <span class="text-2xl font-black text-[#1E3A6D]">250,000</span>
                                </div>
                            </div>
                            <div class="text-right space-y-1">
                                <p class="text-[11px] font-medium text-[#627497] uppercase tracking-wider">Goal Amount
                                </p>
                                <div class="flex items-baseline justify-end gap-1">
                                    <span class="text-[10px] font-bold text-[#1E3A6D]">PKR</span>
                                    <span class="text-xl font-bold text-[#1E3A6D]">500,000</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Promo Banner -->
                    <button
                        class="w-full bg-white rounded-2xl p-4 shadow-md border border-gray-100 flex items-center justify-between mb-4 hover:bg-gray-50 transition-all active:scale-[0.98] group relative overflow-hidden">
                        <div
                            class="absolute inset-0 bg-gradient-to-r from-teal-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity">
                        </div>
                        <div class="flex items-center gap-4 relative z-10">
                            <div class="w-12 h-12 bg-teal-50 rounded-xl flex items-center justify-center">
                                <i data-lucide="zap" class="text-teal-500" width="24"></i>
                            </div>
                            <div class="text-left">
                                <h3 class="text-sm font-bold text-[#1E3A6D]">Pay early & save 2% instantly!</h3>
                                <p class="text-[11px] text-[#627497]">Unlock 2x Rewards & Priority</p>
                            </div>
                        </div>
                        <i data-lucide="chevron-right" width="20"
                            class="text-gray-300 group-hover:text-teal-500 transition-colors"></i>
                    </button>

                    <!-- Upcoming Installment Section -->
                    <div class="bg-white rounded-2xl p-4 shadow-md border border-gray-100 mb-6">
                        <div class="flex justify-between items-start mb-6">
                            <div class="space-y-1">
                                <p class="text-[11px] font-medium text-[#627497] uppercase tracking-wider">Upcoming
                                    Installment</p>
                                <div class="flex items-baseline gap-1">
                                    <span class="text-[10px] font-bold text-[#1E3A6D]">PKR</span>
                                    <span class="text-2xl font-black text-[#1E3A6D]">25,000</span>
                                </div>
                            </div>
                            <div
                                class="px-3 py-1 bg-orange-50 text-orange-600 rounded-full flex items-center gap-1.5 shadow-sm shadow-orange-500/5">
                                <i data-lucide="clock" width="12" stroke-width="3"></i>
                                <span class="text-[10px] font-black uppercase tracking-wider">Due 01/11/2025</span>
                            </div>
                        </div>

                        <div class="grid grid-cols-3 gap-3">
                            <button
                                class="bg-gray-50 text-[#1E3A6D] py-3 rounded-xl text-[11px] font-bold border border-gray-100 hover:bg-gray-100 transition-colors">Skip
                                Month</button>
                            <button onclick="openManageInstallmentModal()"
                                class="bg-gray-50 text-[#1E3A6D] py-3 rounded-xl text-[11px] font-bold border border-gray-100 hover:bg-gray-100 transition-colors">Merge
                                & Pay</button>
                            <button onclick="openPayNowModal()"
                                class="bg-[#1E3A6D] text-white py-3 rounded-xl text-[11px] font-bold hover:bg-[#16315b] transition-all shadow-lg shadow-blue-900/10">Pay
                                Now</button>
                        </div>
                    </div>

                    <!-- Installment Timeline -->
                    <div class="space-y-4 shadow-md p-4 rounded-2xl">
                        <div class="flex justify-between items-center px-1">
                            <h3 class="text-sm font-bold text-[#1E3A6D]">Installment Timeline</h3>
                            <button
                                class="flex items-center gap-1.5 text-[11px] font-bold text-[#627497] bg-white px-3 py-1.5 rounded-lg border border-gray-100 shadow-sm">
                                This Month <i data-lucide="chevron-down" width="14"></i>
                            </button>
                        </div>

                        <!-- Timeline Item 1 -->
                        <div
                            class="bg-[#F7F7F7] rounded-2xl p-4 shadow-sm border border-gray-100 hover:border-teal-100 transition-colors">
                            <div class="flex justify-between items-center">
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 bg-teal-50 rounded-full flex items-center justify-center">
                                        <i data-lucide="check" class="text-teal-500" width="20" stroke-width="3"></i>
                                    </div>
                                    <div>
                                        <h4 class="text-sm font-bold text-[#1E3A6D]">Cash And Carry</h4>
                                        <p class="text-[11px] text-[#627497]">01-03-2026</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <span
                                        class="text-[10px] font-bold text-teal-600 bg-teal-50 px-2 py-0.5 rounded-full uppercase tracking-wider mb-1 inline-block">Paid</span>
                                    <p class="text-xs font-black text-[#1E3A6D]">PKR 25,000</p>
                                </div>
                            </div>
                        </div>

                        <!-- Timeline Item 2 -->
                        <div
                            class="bg-[#F7F7F7] rounded-2xl p-4 shadow-sm border border-gray-100 hover:border-teal-100 transition-colors opacity-80">
                            <div class="flex justify-between items-center">
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 bg-teal-50 rounded-full flex items-center justify-center">
                                        <i data-lucide="check" class="text-teal-500" width="20" stroke-width="3"></i>
                                    </div>
                                    <div>
                                        <h4 class="text-sm font-bold text-[#1E3A6D]">February</h4>
                                        <p class="text-[11px] text-[#627497]">01-02-2026</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <span
                                        class="text-[10px] font-bold text-teal-600 bg-teal-50 px-2 py-0.5 rounded-full uppercase tracking-wider mb-1 inline-block">Paid</span>
                                    <p class="text-xs font-black text-[#1E3A6D]">PKR 25,000</p>
                                </div>
                            </div>
                        </div>
                    </div>
            </main>

            <!-- Edit Schedule Modal -->
            <div id="edit-schedule-modal"
                class="fixed p-5 inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 hidden">
                <div class="p-5 flex justify-center ">
                    <div class="bg-white no-scrollbar h-[500px] overflow-y-scroll p-5 rounded-lg shadow-lg max-w-sm">
                        <div class="flex items-start justify-between">
                            <div>
                                <h2 class="font-bold text-sm text-[#1E3A6D] ">Change Installment Amount</h2>
                                <p class="text-[#627497] text-xs mb-4">Enter the amount you want to pay for this monthâ€™s
                                    installment.</p>
                            </div>
                            <button onclick="closeEditScheduleModal()" class="ml-auto block">
                                <i data-lucide="x" color="#1E3A6D"></i>
                            </button>
                        </div>

                        <input type="number" id="installment-input" placeholder="e.g. PKR 25,000"
                            class="w-full border border-gray-300 rounded-xl px-3 py-2 mb-4" />

                        <div id="installment-list">
                            <!-- Injected via script -->
                        </div>

                        <p class="lucky-draw text-xs text-primary  px-2 py-1 rounded mt-3">
                            <strong>Note:</strong> Changing your installment amount may affect your overall plan and
                            could delay your expected Umrah month. Weâ€™ll update your schedule based on your new
                            payment..
                        </p>

                        <div class="flex justify-between gap-2 pt-4">
                            <button onclick="closeEditScheduleModal() "
                                class="w-3/6 text-primary rounded-lg bg-white border border-[#DFE8EE] text-[#1E3A6D]">Back</button>
                            <button onclick="closeEditScheduleModal()"
                                class="w-3/6 bg-primary text-white px-3 py-2 rounded-lg"
                                style="background-color: #1E3A6D;">Update Amount</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Pay Now Modal -->
            <div id="pay-now-modal"
                class="fixed inset-0 bg-black bg-opacity-40 hidden flex items-center justify-center z-50">
                <div class="p-5 w-full flex justify-center">
                    <div class="bg-white rounded-lg p-5 w-full max-w-sm shadow-2xl relative">
                        <!-- Header -->
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <h3 class="font-bold text-sm text-[#1E3A6D]">Confirm Installment Payment</h3>
                            </div>
                            <button onclick="closePayNowModal()"><i data-lucide="x" class="text-gray-400"></i></button>
                        </div>
                        <!-- Content -->
                        <div class="space-y-2">
                            <div class="flex justify-between items-center bg-[#F4F8FB] p-3 rounded-lg">
                                <span class="text-[#627497] text-sm">Monthly Installment:</span>
                                <span class="font-bold text-sm text-[#1E3A6D]">PKR 25,000</span>
                            </div>
                            <div class="flex justify-between items-center lucky-draw p-3 rounded-lg">
                                <div class="flex items-center gap-2">
                                    <span class="">ðŸ‘‘</span>
                                    <div>
                                        <p class="text-sm font-semibold text-[#1E3A6D]">Use Ihram Points</p>
                                        <p class="text-xs text-[#627497]">Available: 1249</p>
                                    </div>
                                </div>

                                <!-- Toggle Switch -->
                                <div
                                    class="relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in">
                                    <input type="checkbox" name="toggle" id="toggle"
                                        class="toggle-checkbox absolute block w-5 h-5 rounded-full bg-white border-4 appearance-none cursor-pointer border-[#b5bdc4]" />
                                    <label for="toggle"
                                        class="toggle-label block overflow-hidden h-5 rounded-full bg-[#b5bdc4] cursor-pointer"></label>
                                </div>
                            </div>

                            <hr class="border-gray-100" />

                            <div class="flex justify-between items-center mb-3">
                                <span class="font-semibold text-[#1E3A6D]">Total Amount:</span>
                                <span class="text-xl font-bold text-[#24B3BA]">PKR 25,000</span>
                            </div>
                        </div>
                        <!-- Button -->
                        <button onclick="proceedToOTP()"
                            class="w-full bg-[#1E3A6D] text-white py-3.5 rounded-xl font-bold hover:bg-[#16315b] transition mt-3">Pay
                            Securely</button>
                    </div>
                </div>
            </div>

            <!-- Merge Installments Modal -->
            <div id="manage-installment-modal"
                class="fixed inset-0 bg-black/40 hidden flex items-center justify-center z-[60] backdrop-blur-sm">
                <div class="px-5 w-full flex justify-center">
                    <div
                        class="bg-white rounded-3xl p-6 relative w-full max-w-sm shadow-2xl transition-all duration-300">
                        <!-- Close Icon -->
                        <button onclick="closeManageInstallmentModal()"
                            class="absolute top-6 right-6 text-gray-400 hover:text-gray-600 transition-colors">
                            <i data-lucide="x" width="20"></i>
                        </button>

                        <!-- Header -->
                        <div class="mb-2">
                            <h2 class="text-lg font-bold text-[#1E3A6D]">Merge Installments</h2>
                        </div>
                        <p class="text-xs text-[#627497] mb-6 leading-relaxed">
                            Two upcoming installments will be merged into one payment and your plan will be updated.
                        </p>

                        <div class="bg-gray-50/50 rounded-2xl p-4 mb-6 border border-gray-100">
                            <!-- List Header -->
                            <div class="flex justify-between items-center mb-4">
                                <span class="text-[11px] font-bold text-[#627497] uppercase tracking-wider">Upcoming
                                    Months</span>
                                <button onclick="togglePayAllRemaining()"
                                    class="text-[11px] font-bold text-[#24B2B9] hover:underline uppercase tracking-wider">Pay
                                    All Remaining</button>
                            </div>

                            <!-- Installment List -->
                            <div class="space-y-2 mb-6 max-h-[180px] overflow-y-auto no-scrollbar pr-1">
                                <!-- Items -->
                                <div onclick="toggleInstallment(this)"
                                    class="installment-row bg-white border border-gray-100 rounded-xl p-3 flex items-center justify-between cursor-pointer transition-all hover:border-[#24B2B9]"
                                    data-amount="5000">
                                    <div class="flex items-center gap-3">
                                        <div
                                            class="checkbox-wrapper w-5 h-5 rounded-full border-2 border-gray-200 flex items-center justify-center transition-all bg-white">
                                            <i data-lucide="check" class="text-white hidden" width="12"
                                                stroke-width="4"></i>
                                        </div>
                                        <span class="text-sm font-bold text-[#1E3A6D]">January 2026</span>
                                    </div>
                                    <span class="text-sm font-bold text-[#1E3A6D]">5,000</span>
                                </div>
                                <div onclick="toggleInstallment(this)"
                                    class="installment-row bg-white border border-gray-100 rounded-xl p-3 flex items-center justify-between cursor-pointer transition-all hover:border-[#24B2B9]"
                                    data-amount="5000">
                                    <div class="flex items-center gap-3">
                                        <div
                                            class="checkbox-wrapper w-5 h-5 rounded-full border-2 border-gray-200 flex items-center justify-center transition-all bg-white">
                                            <i data-lucide="check" class="text-white hidden" width="12"
                                                stroke-width="4"></i>
                                        </div>
                                        <span class="text-sm font-bold text-[#1E3A6D]">February 2026</span>
                                    </div>
                                    <span class="text-sm font-bold text-[#1E3A6D]">5,000</span>
                                </div>
                                <div onclick="toggleInstallment(this)"
                                    class="installment-row bg-white border border-gray-100 rounded-xl p-3 flex items-center justify-between cursor-pointer transition-all hover:border-[#24B2B9]"
                                    data-amount="5000">
                                    <div class="flex items-center gap-3">
                                        <div
                                            class="checkbox-wrapper w-5 h-5 rounded-full border-2 border-gray-200 flex items-center justify-center transition-all bg-white">
                                            <i data-lucide="check" class="text-white hidden" width="12"
                                                stroke-width="4"></i>
                                        </div>
                                        <span class="text-sm font-bold text-[#1E3A6D]">March 2026</span>
                                    </div>
                                    <span class="text-sm font-bold text-[#1E3A6D]">5,000</span>
                                </div>
                            </div>

                            <!-- Points Toggle -->
                            <div class="bg-[#24B2B9] rounded-xl p-3 mb-6 flex justify-between items-center text-white">
                                <div class="flex items-center gap-3">
                                    <div class="w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center">
                                        <i data-lucide="crown" width="18"></i>
                                    </div>
                                    <div>
                                        <p class="text-xs font-bold">Use Ihram Points</p>
                                        <p class="text-[10px] opacity-80">Available Points: 1249</p>
                                    </div>
                                </div>
                                <div
                                    class="relative inline-block w-8 h-4 align-middle select-none transition duration-200 ease-in">
                                    <input type="checkbox" name="points" id="points-toggle"
                                        class="absolute block w-4 h-4 rounded-full bg-white border-4 appearance-none cursor-pointer border-transparent checked:right-0 right-4" />
                                    <label for="points-toggle"
                                        class="block overflow-hidden h-4 rounded-full bg-white/20 cursor-pointer"></label>
                                </div>
                            </div>

                            <!-- Total -->
                            <div class="flex justify-between items-center py-2 border-t border-gray-100 pt-4">
                                <span class="text-sm font-bold text-[#1E3A6D]">Total merged amount:</span>
                                <div class="flex items-baseline gap-1">
                                    <span class="text-[10px] font-bold text-teal-600">PKR</span>
                                    <span id="merged-total-display"
                                        class="text-xl font-black text-teal-600">15,000</span>
                                </div>
                            </div>
                        </div>

                        <!-- Terms -->
                        <div class="flex items-center gap-3 mb-6 px-1">
                            <input type="checkbox" id="terms-check"
                                class="w-4 h-4 rounded border-gray-300 text-[#1E3A6D] focus:ring-[#1E3A6D]">
                            <label for="terms-check" class="text-[11px] text-[#627497]">I agree to the <a
                                    href="terms-and-conditions.html" class="text-[#1E3A6D] underline">terms &
                                    conditions</a>.</label>
                        </div>

                        <!-- Buttons -->
                        <div class="grid grid-cols-2 gap-3">
                            <button onclick="closeManageInstallmentModal()"
                                class="py-3.5 rounded-xl font-bold text-sm text-[#627497] border border-gray-200 hover:bg-gray-50 transition-colors uppercase tracking-wider">Cancel</button>
                            <button onclick="proceedToOTP()"
                                class="py-3.5 rounded-xl font-bold text-sm text-white bg-[#1E3A6D] hover:bg-[#16315b] transition-all shadow-lg shadow-blue-900/10 uppercase tracking-wider">Pay
                                Securely</button>
                        </div>
                    </div>
                </div>
            </div>

            <style>
                .installment-row.selected {
                    background-color: #E7EDF1;
                    border-color: #24B3BA;
                }

                .installment-row.selected .checkbox-wrapper {
                    background-color: #24B3BA;
                    border-color: #24B3BA;
                }

                .installment-row.selected i {
                    display: block;
                    color: white;
                }
            </style>

            <!-- OTP Verification Modal -->
            <div id="otp-modal"
                class="fixed inset-0 bg-black bg-opacity-40 hidden flex items-center justify-center z-50">
                <div class="px-5 w-full flex justify-center">
                    <div class="bg-white rounded-2xl p-6 relative w-full max-w-sm shadow-2xl">
                        <!-- Header -->
                        <div class="flex justify-between items-start mb-6">
                            <button onclick="backToMergeModal()"
                                class="text-primary hover:bg-gray-100 p-1 rounded-full transition-colors">
                                <i data-lucide="chevron-left" width="24"></i>
                            </button>
                            <h3 class="text-lg font-bold text-[#1E3A6D] pr-8">OTP Verification</h3>
                            <div class="w-8"></div>
                        </div>

                        <div class="text-center">
                            <h4 class="font-bold text-[#1E3A6D] mb-2">Enter Verification Code</h4>
                            <p class="text-xs text-[#627497] mb-8 px-4">
                                A 4-digit code has been sent to your mobile number. Enter it below to confirm your
                                payment.
                            </p>

                            <!-- OTP Inputs -->
                            <div class="flex justify-center gap-3 mb-8">
                                <input type="text" maxlength="1"
                                    class="w-12 h-14 bg-[#F4F8FB] text-primary text-center rounded-xl text-xl font-bold focus:outline-none focus:ring-2 focus:ring-[#1E3A6D] border border-transparent shadow-sm" />
                                <input type="text" maxlength="1"
                                    class="w-12 h-14 bg-[#F4F8FB] text-primary text-center rounded-xl text-xl font-bold focus:outline-none focus:ring-2 focus:ring-[#1E3A6D] border border-transparent shadow-sm" />
                                <input type="text" maxlength="1"
                                    class="w-12 h-14 bg-[#F4F8FB] text-primary text-center rounded-xl text-xl font-bold focus:outline-none focus:ring-2 focus:ring-[#1E3A6D] border border-transparent shadow-sm" />
                                <input type="text" maxlength="1"
                                    class="w-12 h-14 bg-[#F4F8FB] text-primary text-center rounded-xl text-xl font-bold focus:outline-none focus:ring-2 focus:ring-[#1E3A6D] border border-transparent shadow-sm" />
                            </div>

                            <button onclick="confirmPayment()"
                                class="w-full bg-[#1E3A6D] text-white py-3.5 rounded-xl font-bold hover:bg-[#16315b] transition shadow-lg shadow-blue-900/20 mb-4">
                                Confirm
                            </button>

                            <p class="text-xs text-[#627497]">Resend Code in <span
                                    class="text-primary font-bold">30s</span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Success Modal -->
            <div id="success-modal"
                class="fixed inset-0 bg-black bg-opacity-40 hidden flex items-center justify-center z-50">
                <div class="px-5 w-full flex justify-center">
                    <div class="bg-white rounded-2xl p-8 relative w-full max-w-sm shadow-2xl text-center">
                        <div
                            class="w-16 h-16 bg-[#F0FDF4] rounded-full flex items-center justify-center mx-auto mb-4 border border-[#DCFCE7]">
                            <img src="assets/svgs/success.svg" alt="Success" class="w-8 h-8"
                                onerror="this.src='https://placehold.co/64x64?text=âœ“'">
                        </div>

                        <h3 class="text-xl font-bold text-[#1E3A6D] mb-2">Payment Successful!</h3>
                        <p class="text-sm text-[#627497] mb-8 leading-relaxed">
                            Your payment of PKR 10,000 has been received. Two installments have been merged into your
                            plan.
                        </p>

                        <button onclick="closeAllModals()"
                            class="w-full bg-[#1E3A6D] text-white py-3.5 rounded-xl font-bold hover:bg-[#16315b] transition shadow-lg shadow-blue-900/20">
                            Done
                        </button>
                    </div>
                </div>
            </div>

            </main>


        </div>

        <!-- Bottom Navigation -->
        <nav id="bottom-nav"
            class="fixed bottom-0 left-0 right-0 bg-[#1E3A6D] text-white pb-safe pt-2 px-4 z-50 max-w-md mx-auto rounded-t-3xl shadow-[0_-10px_30px_rgba(0,0,0,0.1)]">
            <div class="flex justify-between items-center pb-4 pt-2">
                <!-- Home -->
                <a href="index.html" class="flex flex-col items-center space-y-1.5 w-1/4 text-gray-400">
                    <div>
                        <i data-lucide="home" width="22" stroke-width="2"></i>
                    </div>
                    <span class="text-[9px] font-medium tracking-wide">
                        Home
                    </span>
                </a>

                <!-- Ihram -->
                <a href="journey.html" class="flex flex-col items-center space-y-1.5 w-1/4 text-gray-400">
                    <div>
                        <i data-lucide="user-round" width="22" stroke-width="2"></i>
                    </div>
                    <span class="text-[9px] font-medium tracking-wide">
                        Ihram
                    </span>
                </a>

                <!-- Umrah (Active) -->
                <button class="flex flex-col items-center space-y-1.5 w-1/4">
                    <div class="text-white">
                        <i data-lucide="zap" width="22" stroke-width="2.5"></i>
                    </div>
                    <span class="text-[9px] font-bold tracking-wide">
                        Umrah
                    </span>
                </button>

                <!-- Profile -->
                <a href="profile.html" class="flex flex-col items-center space-y-1.5 w-1/4 text-gray-400">
                    <div>
                        <i data-lucide="user" width="22" stroke-width="2"></i>
                    </div>
                    <span class="text-[9px] font-medium tracking-wide">
                        Profile
                    </span>
                </a>
            </div>
        </nav>

        <script>
            // Sample Installments Data
            const installments = [
                { id: 1, date: "2024-09-01", amount: 5000, status: "paid", month: "January" },
                { id: 2, date: "2024-10-01", amount: 5000, status: "unpaid", month: "February" },
                { id: 3, date: "2024-11-01", amount: 5000, status: "unpaid", month: "March" }
            ];

            function openEditScheduleModal() {
                renderInstallments();
                document.getElementById("edit-schedule-modal").classList.remove("hidden");
            }

            function closeEditScheduleModal() {
                document.getElementById("edit-schedule-modal").classList.add("hidden");
            }

            function openPayNowModal() {
                document.getElementById("pay-now-modal").classList.remove("hidden");
            }

            function closePayNowModal() {
                document.getElementById("pay-now-modal").classList.add("hidden");
            }

            function openManageInstallmentModal() {
                document.getElementById("manage-installment-modal").classList.remove("hidden");
                // Reset state
                const rows = document.querySelectorAll('.installment-row');
                rows.forEach(r => r.classList.remove('selected'));
                updateMergedTotal();
            }

            function toggleInstallment(element) {
                lucide.createIcons();
                element.classList.toggle('selected');
                updateMergedTotal();
            }

            function togglePayAllRemaining() {
                const rows = document.querySelectorAll('.installment-row');
                const allSelected = Array.from(rows).every(r => r.classList.contains('selected'));

                rows.forEach(r => {
                    if (allSelected) {
                        r.classList.remove('selected');
                    } else {
                        r.classList.add('selected');
                        lucide.createIcons();
                    }
                });
                updateMergedTotal();
            }

            function updateMergedTotal() {
                const selectedRows = document.querySelectorAll('.installment-row.selected');
                let total = 0;
                selectedRows.forEach(row => {
                    total += parseInt(row.dataset.amount);
                });

                document.getElementById('merged-total-display').innerText = `PKR ${total.toLocaleString()}`;
            }

            function closeManageInstallmentModal() {
                document.getElementById("manage-installment-modal").classList.add("hidden");
            }

            function proceedToOTP() {
                closeManageInstallmentModal();
                setTimeout(() => {
                    document.getElementById("otp-modal").classList.remove("hidden");
                }, 100);
            }

            function backToMergeModal() {
                document.getElementById("otp-modal").classList.add("hidden");
                setTimeout(() => {
                    openManageInstallmentModal();
                }, 100);
            }

            function confirmPayment() {
                document.getElementById("otp-modal").classList.add("hidden");
                setTimeout(() => {
                    document.getElementById("success-modal").classList.remove("hidden");
                }, 100);
            }

            function closeAllModals() {
                document.getElementById("manage-installment-modal").classList.add("hidden");
                document.getElementById("otp-modal").classList.add("hidden");
                document.getElementById("success-modal").classList.add("hidden");
                document.getElementById("pay-now-modal").classList.add("hidden");
                document.getElementById("edit-schedule-modal").classList.add("hidden");
            }

            function renderInstallments() {
                const container = document.getElementById("installment-list");
                container.innerHTML = installments.map((i, index) => `
                <div class=" mb-4 p-4 rounded-xl bg-[#F4F8FB] shadow-sm">
                    <div class="flex justify-between mb-2 items-center">
                        <div>
                            <p class="font-semibold text-sm text-[#1E3A6D]">${i.month}</p>
                            <p class="text-[#627497] text-xs mb-3">${i.date}</p>
                        </div>

                        <div>
                            <p class="text-xs text-right flex items-center gap-2 w-max px-2 rounded-md" style="color: ${i.status === 'paid' ? '#41AB13' : '#E26F31'}; background-color: ${i.status === 'paid' ? '#E6FBDE' : '#F7EADB'};" ><i data-lucide="${i.status === 'paid' ? 'check' : 'clock'}" color="${i.status === 'paid' ? '#41AB13' : '#E26F31'}" width="10"></i>${i.status === 'paid' ? 'Paid' : 'Pending'}</p>
                            <p class="font-bold text-sm text-right text-[#24B3BA]">PKR ${i.amount.toLocaleString()}</p>
                        </div>

                    </div>
                    <div class="flex justify-between items-center mt-2" style="display: ${i.status === 'paid' ? 'none' : 'flex'};">
                        <div class="flex justify-between space-x-1 pt-4 w-full">
                            <button class="bg-transparent border border-[#DFE8EE] rounded-xl py-2 px-4 text-xs font-semibold text-[#1E3A6D] hover:bg-gray-50 flex-1">Skip Month</button>
                            <button onclick="openManageInstallmentModal()" class="bg-[#E7EDF1] border border-[#DFE8EE] rounded-xl py-2 px-4 text-xs font-semibold text-[#1E3A6D] hover:bg-gray-50 flex-1">Merge & Pay</button>
                            <button onclick="openPayNowModal()" class="bg-primary text-white rounded-xl py-2 px-4 font-semibold text-xs hover:bg-[#16315b] flex-1">Pay Now</button>
                        </div>
                    </div>
                </div>
            `).join('');
                lucide.createIcons(); // Re-render icons for injected content
            }

            lucide.createIcons();
        </script>
        <script src="js/sidebar.js"></script>
</body>

</html>